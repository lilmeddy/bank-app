<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="sign.css">
    <script src="https://www.gstatic.com/firebasejs/10.3.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.3.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.3.1/firebase-firestore-compat.js"></script>
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
</head>
<body>
    <section>
        <main class="content" id="block">
            <h1>Reset your password</h1>
            <p>Securely login to your PiggyVest</p>
            <form id="reset-password-form">
                <div class="form-txt">
                    <label for="Email">New Password</label> <br>
                    <input type="password" id="new-password" required>
                </div>
    
                <div class="form-txt">
                    <label for="password">Confirm Password</label> <br>
                    <input type="password" id="confirm-password" required>
                </div>
                     <br>
                     <br>
            <button type="submit">Reset Password</button>
           
            </form>
      
        </main>
        <div class="a-tag">
            <a href="login.html">Be logged in first to change password</a> <br><br>
        </div>
    </section>
</body>
</html>

<script>
    
    const firebaseConfig = {
        apiKey: "AIzaSyCZRt5ZugU3gYBuKEWAAdbgdtCoIuizGJ4",
        authDomain: "bank-56c80.firebaseapp.com",
        projectId: "bank-56c80",
        storageBucket: "bank-56c80.appspot.com",
        messagingSenderId: "278093243224",
        appId: "1:278093243224:web:268d9c364c7d4e5f577b2d"
    };
    const app = firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
</script>

 <script>
   const resetPasswordForm = document.getElementById('reset-password-form');

resetPasswordForm.addEventListener('submit', (e) => {
  e.preventDefault();
  
  const newPassword = document.getElementById('new-password').value;
  const confirmPassword = document.getElementById('confirm-password').value;
  
  if (newPassword !== confirmPassword) {
    alert('Passwords do not match. Please try again.');
    return;
  }
 

  firebase.auth().onAuthStateChanged((user) => {
    if (user) {
  user.updatePassword(newPassword)
    .then(() => {
      alert('Password reset successfully.');
        window.location.href = "account.html"
    })
    .catch((error) => {
      console.error('Password reset error:', error.message);
      alert('An error occurred while resetting the password.');
    });
}
})
})

    </script>
    <script src="https://unpkg.com/boxicons@2.1.4/dist/boxicons.js"></script>
 <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm" crossorigin="anonymous"></script>